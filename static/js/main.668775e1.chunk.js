(this["webpackJsonptest-align"]=this["webpackJsonptest-align"]||[]).push([[0],{19:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var a,c,r=n(0),i=n.n(r),s=n(5),o=n.n(s),d=(n(19),n(2)),u=n(9),l=n.n(u),g=n(13),j=n(4),m="imagesRotationState";!function(e){e[e.Angle=90]="Angle",e[e.Init=0]="Init"}(a||(a={})),function(e){e.Loading="LOADING",e.Success="SUCCESS",e.Failed="FAILED"}(c||(c={}));var f=n(6),h=function(e){var t=function(e){return e.reduce((function(e,t){return Object(d.a)(Object(d.a)({},e),{},Object(f.a)({},t.id,t.rotationAngle))}),{})}(e);localStorage.setItem(m,JSON.stringify(t))},b={images:[],loading:c.Loading},O="images",p=Object(j.b)("".concat(O,"/fetchImages"),Object(g.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://picsum.photos/v2/list");case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))),x=Object(j.c)({name:O,initialState:b,reducers:{changeRotation:function(e,t){e.images=e.images.map((function(e){return e.id!==t.payload.id?e:Object(d.a)(Object(d.a)({},e),{},{rotationAngle:(n=t.payload.rotationAngle,n+a.Angle)});var n})),h(e.images)}},extraReducers:function(e){e.addCase(p.pending,(function(e){e.loading=c.Loading})),e.addCase(p.fulfilled,(function(e,t){var n=function(){var e=localStorage.getItem(m);return null===e?{}:JSON.parse(e)}();e.images=t.payload.map((function(e){return{id:e.id,url:e.download_url,hasStar:1*Math.random()>=.5,rotationAngle:n[e.id]||a.Init}})),e.loading=c.Success})),e.addCase(p.rejected,(function(e,t){e.loading=c.Failed}))}}),v=x.actions.changeRotation,S=x.reducer,_=n(3),N=function(){return Object(_.b)()},A=_.c,C=n(1),I=i.a.memo((function(e){var t=e.image,n=N();return Object(C.jsxs)("div",{className:function(){var e=t.hasStar?"card--has-star":"";return"card ".concat(e)}(),children:[Object(C.jsx)("div",{className:"img__container",children:Object(C.jsx)("img",{className:"card__img",style:{transform:"rotate(".concat(t.rotationAngle,"deg)")},src:t.url,alt:"Card"})}),Object(C.jsxs)("div",{className:"card__content",children:[Object(C.jsxs)("div",{className:"card__info",children:[Object(C.jsx)("span",{className:"card__header",children:"Picture"}),Object(C.jsx)("span",{className:"card__description",children:"Description"})]}),Object(C.jsx)("button",{onClick:function(){n(v(t))},className:"card__rotate-btn",children:Object(C.jsx)("span",{className:"visually-hidden",children:"Rotate 90 deg"})})]})]})})),y=n(14),F=n.n(y);var L=function(){var e=A((function(e){return e.images})),t=e.images,n=e.loading,a=N();return Object(r.useEffect)((function(){a(p())}),[a]),Object(C.jsx)("div",{className:"App",children:Object(C.jsx)("div",{className:"cards",children:function(){switch(n){case c.Loading:var e={borderRadius:"24px 0 24px 24px"};return Array.from({length:6}).map((function(t,n){return Object(C.jsx)(F.a,{style:e,height:252,width:240},n)}));case c.Failed:return Object(C.jsx)("div",{children:"The cards could not be loaded"});case c.Success:return t.length?t.map((function(e){return Object(C.jsx)(I,{image:e},e.id)})):Object(C.jsx)("div",{children:"There are no cards"})}}()})})},w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,30)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))},R=Object(j.a)({reducer:{images:S}});o.a.render(Object(C.jsx)(i.a.StrictMode,{children:Object(C.jsx)(_.a,{store:R,children:Object(C.jsx)(L,{})})}),document.getElementById("root")),w()}},[[29,1,2]]]);
//# sourceMappingURL=main.668775e1.chunk.js.map